(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t){},103:function(e,t){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),c=a(15),i={defaultIntent:"WELCOME",title:"ClaimBot",agentId:window.DIALOGFLOW_AGENT_ID||"ce617fac-032a-442b-8976-36b110b58133"},s={host:window.API_HOST||"http://127.0.0.1:5000"},u=a(13),d=a(23),p="SET_DIALOG_FLOW_SESSION_ID",f="ADD_TO_DIALOG_FLOW_MESSAGE_QUEUE",m="ADD_TOAST_MESSAGE",g="CLEAR_TOAST_MESSAGES",h=a(35),E=a.n(h),v={dialogFlowSessionId:"",dialogFlowMessageQueue:[],toastMessages:[]},b=Object(n.createContext)(v),y=b.Provider,O=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case g:return Object(d.a)({},e,{toastMessages:[]});case m:return Object(d.a)({},e,{toastMessages:[].concat(Object(u.a)(e.toastMessages),[t.payload])});case f:return Object(d.a)({},e,{dialogFlowMessageQueue:[].concat(Object(u.a)(e.dialogFlowMessageQueue),Object(u.a)(t.payload))});case p:if(e.dialogFlowSessionId!==t.payload)return E.a.interceptors.request.use((function(e){return e.headers=Object(d.a)({},e.headers,{Dfsessionid:t.payload}),e}),(function(e){return Promise.reject(e)})),Object(d.a)({},e,{dialogFlowSessionId:t.payload});default:return e}}),v),o=Object(c.a)(a,2),l=o[0],i=o[1];return r.a.createElement(y,{value:{state:l,dispatch:i}},t)};function w(e){var t=e.handleUploadTriggered,a=void 0===t?function(){}:t,n=r.a.useContext(b),o=n.state,l=n.dispatch,c=r.a.useRef(null),s=r.a.useRef(null),u=o.dialogFlowMessageQueue;r.a.useEffect((function(){if(!s.current){var e=document.createElement("df-messenger");e.setAttribute("intent",i.defaultIntent),e.setAttribute("chat-title",i.title),e.setAttribute("agent-id",i.agentId),e.setAttribute("language-code","en"),s.current=e}if(!c.current){var t=document.createElement("script");t.setAttribute("src","https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"),c.current=t}document.body.appendChild(s.current),document.head.appendChild(c.current),s.current.addEventListener("df-response-received",(function(e){e.detail.response.queryResult.fulfillmentMessages.forEach((function(e){d(e)}))}))}),[]),r.a.useEffect((function(){s.current&&s.current.sessionId&&l({type:p,payload:s.current.sessionId})}),[s.current?s.current.sessionId:null]),r.a.useEffect((function(){u.forEach((function(e){s.current.renderCustomText(e)}))}),[u.join(",")]);var d=function(e){var t=e.payload,n=void 0===t?null:t;if(n)switch(n.action){case"fileUpload":a(n.parameters.type)}};return null}var C=a(43),j=a.n(C),S=a(62),A=a(131),F=a(144),I=a(133),M=a(134),T=a(143),_=a(111),k=a(145),D=a(137),x=a(139),L=a(140),R=a(141),U=a(64),G=a(135),N=a(138);function W(e,t){var a=new FormData;return a.append("file",t),a.append("type",e),E.a.post("".concat(s.host,"/claim/uploadfile"),a,{headers:{"Content-Type":"multipart/form-data"}})}var Q=Object(A.a)((function(e){return{fileContainer:{height:200,backgroundColor:e.palette.grey[100]},dropZone:{height:"100%","& h4":Object(d.a)({},e.typography.body1)},uploadedFile:{height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","& > *":{marginRight:e.spacing(1),"&:last-child":{marginRight:0}}},loading:{marginLeft:e.spacing(1)}}}));function B(e){var t=e.open,a=void 0!==t&&t,n=e.uploadFileType,o=void 0===n?"hospitalBill":n,l=e.handleClose,i=void 0===l?function(){}:l,s=e.handleUploadComplete,u=void 0===s?function(e){}:s,d=Q({}),p=r.a.useState(null),f=Object(c.a)(p,2),g=f[0],h=f[1],E=r.a.useState(!1),v=Object(c.a)(E,2),y=v[0],O=v[1],w=r.a.useContext(b).dispatch;r.a.useEffect((function(){a&&h(null)}),[a]);var C=function(){var e=Object(S.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(!0),e.next=6,W(o,g);case 6:t=e.sent,a=t.data,u(a),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),w({type:m,payload:"Error uploading file"}),console.error(e.t0);case 15:return e.prev=15,O(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(F.a,{open:a,onClose:i,fullWidth:!0},r.a.createElement(I.a,null,"Upload File"),r.a.createElement(M.a,null,r.a.createElement(T.a,{className:d.fileContainer},g?r.a.createElement(T.a,{className:d.uploadedFile},r.a.createElement(G.a,null),r.a.createElement(_.a,null,g.name),r.a.createElement(k.a,{title:"Remove"},r.a.createElement(D.a,{color:"secondary",onClick:function(){return h(null)}},r.a.createElement(N.a,null)))):r.a.createElement(U.a,{acceptedMimeTypes:["image/*","application/pdf"],onFilesAdded:function(e){e[0]?h(e[0]):h(null)},onFilesRejected:function(e){h(null),w({type:m,payload:"This file type is not allowed"})},blockOtherDrops:!0,className:d.dropZone}))),r.a.createElement(x.a,null,r.a.createElement(L.a,{color:"secondary",onClick:i},"Cancel"),r.a.createElement(L.a,{color:"primary",variant:"contained",disabled:!g||y,onClick:C},"Submit",y&&r.a.createElement(R.a,{color:"",size:10,className:d.loading}))))}var P=a(146),q=a(142);function H(){var e=r.a.useContext(b),t=e.state,a=e.dispatch,n=r.a.useState(!1),o=Object(c.a)(n,2),l=o[0],i=o[1],s=t.toastMessages;r.a.useEffect((function(){i(!0)}),[s.join(",")]);var u=function(){i(!1),a({type:g})};return r.a.createElement(r.a.Fragment,null,s.map((function(e,t){return r.a.createElement(P.a,{open:l,autoHideDuration:6e3,onClose:u,key:t},r.a.createElement(q.a,{style:{backgroundColor:"rgb(220, 0, 78)"},message:e}))})))}var J=function(){var e=r.a.useContext(b),t=(e.state,e.dispatch),a=r.a.useState(),n=Object(c.a)(a,2),o=n[0],l=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement(H,null),r.a.createElement(w,{handleUploadTriggered:function(e){l(e)}}),r.a.createElement(B,{open:!!o,uploadFileType:o,handleClose:function(){l("")},handleUploadComplete:function(e){l(""),t({type:f,payload:[e.fulfillmentMessages]})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null,r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t){},76:function(e,t,a){e.exports=a(108)}},[[76,1,2]]]);
//# sourceMappingURL=main.46856193.chunk.js.map