(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t){},103:function(e,t){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),l=a.n(r),c=a(16),i={defaultIntent:"WELCOME",title:"ClaimBot",agentId:window.DIALOGFLOW_AGENT_ID||"ce617fac-032a-442b-8976-36b110b58133"},s={host:window.API_HOST||"http://127.0.0.1:5000"},u=a(13),d=a(23),p="SET_DIALOG_FLOW_SESSION_ID",f="ADD_TO_DIALOG_FLOW_MESSAGE_QUEUE",m="ADD_TOAST_MESSAGE",h="CLEAR_TOAST_MESSAGES",g=a(35),E=a.n(g),v={dialogFlowSessionId:"",dialogFlowMessageQueue:[],toastMessages:[]},b=Object(n.createContext)(v),y=b.Provider,w=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case h:return Object(d.a)({},e,{toastMessages:[]});case m:return Object(d.a)({},e,{toastMessages:[].concat(Object(u.a)(e.toastMessages),[t.payload])});case f:return Object(d.a)({},e,{dialogFlowMessageQueue:[].concat(Object(u.a)(e.dialogFlowMessageQueue),Object(u.a)(t.payload))});case p:if(e.dialogFlowSessionId!==t.payload)return E.a.interceptors.request.use((function(e){return e.headers=Object(d.a)({},e.headers,{Dfsessionid:t.payload}),e}),(function(e){return Promise.reject(e)})),Object(d.a)({},e,{dialogFlowSessionId:t.payload});default:return e}}),v),r=Object(c.a)(a,2),l=r[0],i=r[1];return o.a.createElement(y,{value:{state:l,dispatch:i}},t)};function O(e){var t=e.handleUploadTriggered,a=void 0===t?function(){}:t,n=o.a.useContext(b),r=n.state,l=n.dispatch,c=o.a.useRef(null),s=o.a.useRef(null),u=r.dialogFlowMessageQueue;o.a.useEffect((function(){if(!s.current){var e=document.createElement("df-messenger");e.setAttribute("intent",i.defaultIntent),e.setAttribute("chat-title",i.title),e.setAttribute("agent-id",i.agentId),e.setAttribute("language-code","en"),s.current=e}if(!c.current){var t=document.createElement("script");t.setAttribute("src","https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"),c.current=t}document.body.appendChild(s.current),document.head.appendChild(c.current),s.current.addEventListener("df-response-received",(function(e){e.detail.response.queryResult.fulfillmentMessages.forEach((function(e){d(e)}))}))}),[]),o.a.useEffect((function(){s.current&&s.current.sessionId&&l({type:p,payload:s.current.sessionId})}),[s.current?s.current.sessionId:null]),o.a.useEffect((function(){u.forEach((function(e){s.current.renderCustomText(e)}))}),[u.join(",")]);var d=function(e){var t=e.payload,n=void 0===t?null:t;if(n)switch(n.action){case"fileUpload":a(n.parameters.type)}};return null}var C=a(43),j=a.n(C),S=a(62),A=a(131),F=a(143),I=a(133),M=a(134),T=a(142),_=a(111),D=a(144),k=a(137),x=a(139),L=a(140),R=a(64),U=a(135),G=a(138);function W(e,t){var a=new FormData;return a.append("file",t),a.append("type",e),E.a.post("".concat(s.host,"/claim/uploadfile"),a,{headers:{"Content-Type":"multipart/form-data"}})}var N=Object(A.a)((function(e){return{fileContainer:{height:200,backgroundColor:e.palette.grey[100]},dropZone:{height:"100%","& h4":Object(d.a)({},e.typography.body1)},uploadedFile:{height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","& > *":{marginRight:e.spacing(1),"&:last-child":{marginRight:0}}}}}));function Q(e){var t=e.open,a=void 0!==t&&t,n=e.uploadFileType,r=void 0===n?"hospitalBill":n,l=e.handleClose,i=void 0===l?function(){}:l,s=e.handleUploadComplete,u=void 0===s?function(e){}:s,d=N({}),p=o.a.useState(null),f=Object(c.a)(p,2),h=f[0],g=f[1],E=o.a.useContext(b).dispatch;o.a.useEffect((function(){a&&g(null)}),[a]);var v=function(){var e=Object(S.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,W(r,h);case 5:t=e.sent,a=t.data,u(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(F.a,{open:a,onClose:i,fullWidth:!0},o.a.createElement(I.a,null,"Upload File"),o.a.createElement(M.a,null,o.a.createElement(T.a,{className:d.fileContainer},h?o.a.createElement(T.a,{className:d.uploadedFile},o.a.createElement(U.a,null),o.a.createElement(_.a,null,h.name),o.a.createElement(D.a,{title:"Remove"},o.a.createElement(k.a,{color:"secondary",onClick:function(){return g(null)}},o.a.createElement(G.a,null)))):o.a.createElement(R.a,{acceptedMimeTypes:["image/*","application/pdf"],onFilesAdded:function(e){e[0]?g(e[0]):g(null)},onFilesRejected:function(e){g(null),E({type:m,payload:"This file type is not allowed"})},blockOtherDrops:!0,className:d.dropZone}))),o.a.createElement(x.a,null,o.a.createElement(L.a,{color:"secondary",onClick:i},"Cancel"),o.a.createElement(L.a,{color:"primary",variant:"contained",disabled:!h,onClick:v},"Submit")))}var B=a(145),P=a(141);function q(){var e=o.a.useContext(b),t=e.state,a=e.dispatch,n=o.a.useState(!1),r=Object(c.a)(n,2),l=r[0],i=r[1],s=t.toastMessages;o.a.useEffect((function(){i(!0)}),[s.join(",")]);var u=function(){i(!1),a({type:h})};return o.a.createElement(o.a.Fragment,null,s.map((function(e,t){return o.a.createElement(B.a,{open:l,autoHideDuration:6e3,onClose:u,key:t},o.a.createElement(P.a,{message:e}))})))}var H=function(){var e=o.a.useContext(b),t=(e.state,e.dispatch),a=o.a.useState(),n=Object(c.a)(a,2),r=n[0],l=n[1];return o.a.createElement("div",{className:"App"},o.a.createElement(q,null),o.a.createElement(O,{handleUploadTriggered:function(e){l(e)}}),o.a.createElement(Q,{open:!!r,uploadFileType:r,handleClose:function(){l("")},handleUploadComplete:function(e){l(""),t({type:f,payload:[e.fulfillmentMessages]})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(w,null,o.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t){},76:function(e,t,a){e.exports=a(108)}},[[76,1,2]]]);
//# sourceMappingURL=main.fe8a5842.chunk.js.map