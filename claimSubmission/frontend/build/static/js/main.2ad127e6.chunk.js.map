{"version":3,"sources":["config/config.js","store/actionTypes.js","store/store.js","components/DialogFlow.js","httpActions/uploadFile.js","components/UploadFileDialog.js","components/SampleData.js","httpActions/sampleData.js","components/ToastMessages.js","App.js","serviceWorker.js","index.js"],"names":["dialogFlowSettings","defaultIntent","title","agentId","window","DIALOGFLOW_AGENT_ID","httpApiSettings","host","API_HOST","location","hostname","claimRepositoryApiSettings","CLAIM_REPO_API_HOST","ACTION_TYPES","initialState","dialogFlowSessionId","dialogFlowMessageQueue","toastMessages","store","createContext","Provider","StateProvider","children","useReducer","state","action","type","payload","axios","interceptors","request","use","config","headers","Dfsessionid","error","Promise","reject","dispatch","value","DialogFlow","handleUploadTriggered","handleLoadFailed","React","useContext","scriptTagElement","useRef","dfMessenger","messageQueue","useEffect","current","dfEl","document","createElement","setAttribute","scriptEl","onerror","body","appendChild","head","addEventListener","evt","detail","response","queryResult","fulfillmentMessages","forEach","message","handleFulfillmentMessage","sessionId","renderCustomText","join","parameters","uploadFile","file","formData","FormData","append","post","useStyles","makeStyles","theme","fileContainer","height","backgroundColor","palette","grey","dropZone","typography","body1","uploadedFile","display","flexDirection","alignItems","justifyContent","marginRight","spacing","loading","marginLeft","UploadFileDialog","open","uploadFileType","handleClose","handleUploadComplete","cssClasses","useState","setFile","isLoading","setIsLoading","handleSubmit","a","data","console","Dialog","onClose","fullWidth","DialogTitle","DialogContent","Box","className","Typography","name","Tooltip","IconButton","color","onClick","CloseOutlined","acceptedMimeTypes","onFilesAdded","files","onFilesRejected","blockOtherDrops","variant","DialogActions","Button","disabled","CircularProgress","size","root","container","margin","SampleData","subjectToShow","setSubjectToShow","sampleIDs","setSampleIDs","sampleSpecialists","setSampleSpecialists","loadSampleData","all","get","sampleIDsResponse","sampleMedicalPanelResponse","map","medicalPanel","RegistrationNo","startIcon","GetApp","Search","maxWidth","List","entry","index","ListItem","key","ListItemText","ToastMessages","isOpen","setIsOpen","Snackbar","autoHideDuration","SnackbarContent","style","App","isOffline","setIsOffline","fileUploadType","setFileUploadType","width","textAlign","fontWeight","resp","Boolean","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2ad127e6.chunk.js","sourcesContent":["export const dialogFlowSettings = {\r\n    defaultIntent: 'WELCOME',\r\n    title: 'ClaimBot',\r\n    agentId: window.DIALOGFLOW_AGENT_ID || 'ce617fac-032a-442b-8976-36b110b58133'\r\n}\r\n\r\nexport const httpApiSettings = {\r\n    host: window.API_HOST || 'http://' + window.location.hostname +':5000'\r\n}\r\n\r\nexport const claimRepositoryApiSettings = {\r\n    host: window.CLAIM_REPO_API_HOST || 'http://' + window.location.hostname +':8081'\r\n}","export const ACTION_TYPES = {\r\n    SET_DIALOG_FLOW_SESSION_ID: 'SET_DIALOG_FLOW_SESSION_ID',\r\n    ADD_TO_DIALOG_FLOW_MESSAGE_QUEUE: 'ADD_TO_DIALOG_FLOW_MESSAGE_QUEUE',\r\n    ADD_TOAST_MESSAGE: 'ADD_TOAST_MESSAGE',\r\n    CLEAR_TOAST_MESSAGES: 'CLEAR_TOAST_MESSAGES'\r\n}","// store.js\r\nimport React, {createContext, useReducer} from 'react';\r\nimport { ACTION_TYPES } from './actionTypes'\r\nimport axios from 'axios'\r\n\r\nexport const initialState = {\r\n    dialogFlowSessionId: '',\r\n    dialogFlowMessageQueue: [],\r\n    toastMessages: []\r\n};\r\nexport const store = createContext(initialState);\r\nconst { Provider } = store;\r\n\r\nexport const StateProvider = ( { children } ) => {\r\n    const [state, dispatch] = useReducer((state, action) => {\r\n    switch(action.type) {\r\n        case ACTION_TYPES.CLEAR_TOAST_MESSAGES:\r\n            return {\r\n                ...state,\r\n                toastMessages: []\r\n            }\r\n\r\n        case ACTION_TYPES.ADD_TOAST_MESSAGE:\r\n            return {\r\n                ...state,\r\n                toastMessages: [...state.toastMessages, action.payload]\r\n            }\r\n\r\n        case ACTION_TYPES.ADD_TO_DIALOG_FLOW_MESSAGE_QUEUE:\r\n            return {\r\n                ...state,\r\n                dialogFlowMessageQueue: [...state.dialogFlowMessageQueue, ...action.payload]\r\n            }\r\n\r\n        case ACTION_TYPES.SET_DIALOG_FLOW_SESSION_ID:\r\n\r\n            if (state.dialogFlowSessionId !== action.payload) {\r\n                axios.interceptors.request.use(function (config) {\r\n                    config.headers = {\r\n                        ...config.headers,\r\n                        Dfsessionid: action.payload\r\n                    }\r\n                    return config\r\n                }, function (error) {\r\n                    return Promise.reject(error)\r\n                });\r\n\r\n                return {\r\n                    ...state,\r\n                    dialogFlowSessionId: action.payload\r\n                }\r\n            }\r\n            break\r\n\r\n        default:\r\n            return state\r\n    };\r\n    }, initialState);\r\n\r\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\r\n};","import React from 'react'\r\nimport { dialogFlowSettings } from '../config/config'\r\nimport { store } from '../store/store'\r\nimport { ACTION_TYPES } from '../store/actionTypes'\r\nimport Axios from 'axios'\r\n\r\nexport function DialogFlow ({\r\n    handleUploadTriggered = () => {},\r\n    handleLoadFailed = () => {}\r\n}) {\r\n\r\n    const {state, dispatch} = React.useContext(store)\r\n    const scriptTagElement = React.useRef(null)\r\n    const dfMessenger = React.useRef(null)\r\n    const { dialogFlowMessageQueue: messageQueue } = state\r\n\r\n    // on mount\r\n    React.useEffect(() => {\r\n\r\n        if (!dfMessenger.current) {\r\n            const dfEl = document.createElement('df-messenger')\r\n            dfEl.setAttribute('intent', dialogFlowSettings.defaultIntent)\r\n            dfEl.setAttribute('chat-title', dialogFlowSettings.title)\r\n            dfEl.setAttribute('agent-id', dialogFlowSettings.agentId)\r\n            dfEl.setAttribute('language-code', 'en')\r\n            dfMessenger.current = dfEl\r\n        }\r\n\r\n        if (!scriptTagElement.current) {\r\n            const scriptEl = document.createElement('script')\r\n            scriptEl.onerror = handleLoadFailed\r\n            scriptEl.setAttribute('src', 'https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1')\r\n            scriptTagElement.current = scriptEl\r\n        }\r\n\r\n        document.body.appendChild(dfMessenger.current)\r\n        document.head.appendChild(scriptTagElement.current)\r\n        \r\n        dfMessenger.current.addEventListener('df-response-received', (evt) => {\r\n            const messages = evt.detail.response.queryResult.fulfillmentMessages\r\n            messages.forEach((message) => {\r\n                handleFulfillmentMessage(message)\r\n            })\r\n        })\r\n\r\n    }, [])\r\n\r\n    // When session id is updated, update store\r\n    React.useEffect(() => {\r\n        if (dfMessenger.current && dfMessenger.current.sessionId) {\r\n            dispatch({\r\n                type: ACTION_TYPES.SET_DIALOG_FLOW_SESSION_ID,\r\n                payload: dfMessenger.current.sessionId\r\n            })\r\n        }\r\n    }, [dfMessenger.current? dfMessenger.current.sessionId : null])\r\n\r\n    React.useEffect(() => {\r\n        messageQueue.forEach((message) => {\r\n            dfMessenger.current.renderCustomText(message)\r\n        })\r\n    }, [messageQueue.join(',')])\r\n\r\n\r\n    // Handle custom payload\r\n    const handleFulfillmentMessage = ({payload=null}) => {\r\n        if (!payload) return\r\n\r\n        switch(payload.action) {\r\n            case 'fileUpload':\r\n                handleUploadTriggered(payload.parameters.type)\r\n                break\r\n        }\r\n    }\r\n\r\n\r\n    return null\r\n}","import axios from 'axios'\r\nimport { httpApiSettings } from '../config/config'\r\n\r\nexport function uploadFile(type, file) {\r\n    \r\n    const formData = new FormData()\r\n    formData.append('file', file)\r\n    formData.append('type', type)\r\n\r\n    return axios.post(`${httpApiSettings.host}/claim/uploadfile`, formData, {\r\n        headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n        }\r\n    })\r\n}","import React from 'react'\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, makeStyles, Box, Button, Typography, IconButton, Tooltip, CircularProgress } from '@material-ui/core'\r\nimport { FileDropZone, image } from 'mui-dropzone'\r\nimport { InsertDriveFileOutlined as FileIcon, CloseOutlined } from '@material-ui/icons';\r\nimport { uploadFile } from '../httpActions/uploadFile';\r\nimport { store } from '../store/store';\r\nimport { ACTION_TYPES } from '../store/actionTypes';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    fileContainer: {\r\n        height: 200,\r\n        backgroundColor: theme.palette.grey[100]\r\n    },\r\n    dropZone: {\r\n        height: '100%',\r\n        '& h4': {\r\n            ...theme.typography.body1\r\n        }\r\n    },\r\n    uploadedFile: {\r\n        height: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n\r\n        '& > *': {\r\n            marginRight: theme.spacing(1),\r\n\r\n            '&:last-child': {\r\n                marginRight: 0\r\n            }\r\n        }\r\n    },\r\n    loading: {\r\n        marginLeft: theme.spacing(1)\r\n    }\r\n}))\r\n\r\nexport function UploadFileDialog({\r\n    open = false,\r\n    uploadFileType = 'hospitalBill',\r\n    handleClose = () => {},\r\n    handleUploadComplete = (file) => {}\r\n}) {\r\n\r\n    const cssClasses = useStyles({})\r\n    const [file, setFile] = React.useState(null)\r\n    const [isLoading, setIsLoading] = React.useState(false)\r\n    const { dispatch } = React.useContext(store)\r\n\r\n    React.useEffect(() => {\r\n        if (open) {\r\n            setFile(null)\r\n        }\r\n    }, [open])\r\n    \r\n    const handleFileChange = (files) => {\r\n        if (!files[0]) {\r\n            setFile(null)\r\n        } else {\r\n            setFile(files[0])\r\n        }\r\n    }\r\n\r\n    const handleFileRejected = (evt) => {\r\n        setFile(null)\r\n        dispatch({\r\n            type: ACTION_TYPES.ADD_TOAST_MESSAGE,\r\n            payload: 'This file type is not allowed'\r\n        })\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n        if (!file) return\r\n        try {\r\n            setIsLoading(true)\r\n            const { data } = await uploadFile(uploadFileType, file)\r\n            handleUploadComplete(data)\r\n        } catch (e) {\r\n            dispatch({\r\n                type: ACTION_TYPES.ADD_TOAST_MESSAGE,\r\n                payload: 'Error uploading file'\r\n            })\r\n            console.error(e)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onClose={handleClose} fullWidth={true}>\r\n            <DialogTitle>Upload Bill</DialogTitle>\r\n            <DialogContent>\r\n                <Box className={cssClasses.fileContainer}>\r\n                    {!!file?\r\n                        (\r\n                            <Box className={cssClasses.uploadedFile}>\r\n                                <FileIcon />\r\n                                <Typography>{file.name}</Typography>\r\n                                <Tooltip title=\"Remove\">\r\n                                    <IconButton color=\"secondary\" onClick={()=>setFile(null)}><CloseOutlined /></IconButton>\r\n                                </Tooltip>\r\n                            </Box>\r\n                        )\r\n                        : (\r\n                            <FileDropZone\r\n                                acceptedMimeTypes={['image/png','image/jpg','image/jpeg','image/gif','image/bmp']}\r\n                                onFilesAdded={handleFileChange}\r\n                                onFilesRejected={handleFileRejected}\r\n                                blockOtherDrops={true}\r\n                                className={cssClasses.dropZone}\r\n                            />\r\n                        )\r\n                    }\r\n                </Box>\r\n                <br />\r\n                <Typography variant=\"caption\">*Supported file formats: png, jpg, gif, and bmp</Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button \r\n                    color=\"secondary\" \r\n                    onClick={handleClose}\r\n                >Cancel</Button>\r\n                <Button \r\n                    color=\"primary\" \r\n                    variant=\"contained\" \r\n                    disabled={!file || isLoading}\r\n                    onClick={handleSubmit}\r\n                >\r\n                    Submit \r\n                    {isLoading && <CircularProgress color=\"\" size={10} className={cssClasses.loading} />} \r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Box, Typography, Grid, makeStyles, CircularProgress, List, ListItem, ListItemIcon, ListItemText, Button, Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core'\r\nimport { GetApp, Search } from '@material-ui/icons'\r\nimport { getSampleMedicalPanel, getSamplePolicyHolderIDs } from '../httpActions/sampleData'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'stretch',\r\n        justifyContent: 'center'\r\n    },\r\n    container: {\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nexport const SampleData = () => {\r\n\r\n    const cssClasses = useStyles({})\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [subjectToShow, setSubjectToShow] = useState(null)\r\n    const [sampleIDs, setSampleIDs] = useState([])\r\n    const [sampleSpecialists, setSampleSpecialists] = useState([])\r\n\r\n    useEffect(() => {\r\n        loadSampleData()\r\n    }, [])\r\n\r\n    const loadSampleData = async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            const [ sampleIDsResponse, sampleMedicalPanelResponse ] = await Promise.all([\r\n                getSamplePolicyHolderIDs(), \r\n                getSampleMedicalPanel()\r\n            ])\r\n\r\n            setSampleIDs(sampleIDsResponse.data.data)\r\n            setSampleSpecialists(sampleMedicalPanelResponse.data.data.map(medicalPanel => medicalPanel.RegistrationNo))\r\n        } catch (e) {\r\n            console.error(e)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    if (isLoading) {\r\n        return <CircularProgress />\r\n    }\r\n\r\n    return (\r\n        <Box className={cssClasses.root}>\r\n            <Box className={cssClasses.container}>\r\n                <Button variant=\"contained\" startIcon={<GetApp />} onClick={()=>window.open('/bill-sample.zip')}>Sample Bills</Button>\r\n            </Box>\r\n\r\n            <Box className={cssClasses.container}>\r\n                <Button variant=\"contained\" startIcon={<Search />} onClick={()=>setSubjectToShow('ids')}>Sample NRIC</Button>\r\n            </Box>\r\n\r\n            <Box className={cssClasses.container}>\r\n                <Button variant=\"contained\" startIcon={<Search />} onClick={()=>setSubjectToShow('specialists')}>Sample Specialist</Button>\r\n            </Box>\r\n\r\n            {/* MODAL */}\r\n            <Dialog open={subjectToShow !== null} fullWidth={true} maxWidth=\"sm\">\r\n                <DialogTitle>\r\n                    {!!subjectToShow && \r\n                        (\r\n                            subjectToShow === 'ids'\r\n                                ? 'Sample NRICs'\r\n                                : 'Sample Specialists'\r\n                        )\r\n                    }\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <List>\r\n                        {!!subjectToShow && \r\n                            (subjectToShow === 'ids' ? sampleIDs : sampleSpecialists).map((entry, index) => (\r\n                                <ListItem key={index}>\r\n                                    <ListItemText>{entry}</ListItemText>\r\n                                </ListItem>\r\n                            ))\r\n                        }\r\n                    </List>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={()=>setSubjectToShow(null)}>Close</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            {/* END MODAL */}\r\n        </Box>\r\n    )\r\n\r\n}","import axios from 'axios'\r\nimport { claimRepositoryApiSettings } from '../config/config'\r\n\r\nexport function getSampleMedicalPanel() {\r\n    return axios.get(`${claimRepositoryApiSettings.host}/medicalpanel?limit=50&offset=1000`)\r\n}\r\n\r\nexport function getSamplePolicyHolderIDs() {\r\n    return axios.get(`${claimRepositoryApiSettings.host}/healthpolicy/sampleids?limit=100`)\r\n}","import React from 'react'\r\nimport { Snackbar, SnackbarContent } from '@material-ui/core'\r\nimport { store } from '../store/store'\r\nimport { ACTION_TYPES } from '../store/actionTypes'\r\n\r\nexport function ToastMessages() {\r\n\r\n    const { state, dispatch } = React.useContext(store)\r\n    const [isOpen, setIsOpen] = React.useState(false)\r\n\r\n    const { toastMessages } = state\r\n\r\n    React.useEffect(() => {\r\n        setIsOpen(true)\r\n    }, [toastMessages.join(',')])\r\n\r\n    const handleClose = () => {\r\n        setIsOpen(false)\r\n        dispatch({\r\n            type: ACTION_TYPES.CLEAR_TOAST_MESSAGES\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {toastMessages.map((message, index) => (\r\n                <Snackbar open={isOpen} autoHideDuration={6000} onClose={handleClose} key={index}>\r\n                    <SnackbarContent \r\n                        style={{\r\n                            backgroundColor:'rgb(220, 0, 78)'\r\n                        }} \r\n                        message={message} \r\n                    />\r\n                </Snackbar>\r\n            ))}\r\n        </>\r\n    )\r\n}","import React from 'react';\nimport { DialogFlow } from './components/DialogFlow'\nimport { UploadFileDialog } from './components/UploadFileDialog'\nimport { SampleData } from './components/SampleData'\nimport { ToastMessages } from './components/ToastMessages'\nimport { store } from './store/store'\nimport { ACTION_TYPES } from './store/actionTypes'\nimport { Typography } from '@material-ui/core';\n\nfunction App() {\n\n  const { state, dispatch } = React.useContext(store)\n  const [isOffline, setIsOffline] = React.useState(false)\n  const [fileUploadType, setFileUploadType] = React.useState()\n\n  const handleUploadTriggered = (type) => {\n    setFileUploadType(type)\n  }\n\n  const closeFileUploadDialog = () => {\n    setFileUploadType('')\n  }\n\n  const handleUploadComplete = (resp) => {\n    setFileUploadType('')\n    dispatch({\n      type: ACTION_TYPES.ADD_TO_DIALOG_FLOW_MESSAGE_QUEUE,\n      payload: [resp.fulfillmentMessages]\n    })\n  }\n  \n  const handleLoadFailed = () => {\n    setIsOffline(true)\n  }\n\n  return (\n    <div className=\"App\">\n      <ToastMessages />\n       \n      <div style={{ width: '100%', height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', textAlign: 'center' }}>\n        <Typography variant=\"h5\" style={{color: '#a2a2a2', fontWeight: 100}}>\n        { isOffline \n            ? 'Dialogflow failed to load. If you are currently offline, please use the dashboard to submit claims instead.'\n            : (\n              <>\n                To start, please talk to the chatbot at the bottom right of the screen.\n                <br />Here are some sample data to help you along.\n                <SampleData />\n              </>\n            )\n        }\n        </Typography>\n      </div>\n      <DialogFlow \n        handleUploadTriggered={handleUploadTriggered}\n        handleLoadFailed={handleLoadFailed}\n      />\n      <UploadFileDialog  \n        open={!!fileUploadType}\n        uploadFileType={fileUploadType}\n        handleClose={closeFileUploadDialog}\n        handleUploadComplete={handleUploadComplete}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { StateProvider } from './store/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider>\n      <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}